<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard - Data Record</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>ðŸ“š DATA RECORD</h1>
      <p class="tagline">Easy & Smart Management</p>
    </div>
    <div class="header-right">
      <span id="orgNameDisplay"></span>
      <span id="clock"></span>
      <button id="logoutBtn">Logout</button>
    </div>
  </header>

  <nav class="sidebar">
    <button onclick="showSection('orgDetails')">Organisation Details</button>
    <button onclick="showSection('Notifications')">Add Notifications /Information</button>
    <button onclick="showSection('members')">Members</button>
    <button onclick="showSection('feeDetails')">Fee Details</button>
    <button onclick="showSection('reports')">Reports</button>
  </nav>

  <main>
    <!-- Organisation Section -->
    <section id="orgDetails" class="card section hidden">
      <h2>Organisation Details</h2>
      <p><strong>Organisation Name:</strong> <span id="orgName"></span></p>
      <p><strong>Admin Name:</strong> <span id="adminName"></span></p>
      <p><strong>Address:</strong> <span id="address"></span></p>
      <p><strong>Mobile:</strong> <span id="mobile"></span></p>
      <p><strong>Email:</strong> <span id="email"></span></p>
      <p><strong>Subscription:</strong> <span id="subscription"></span></p>
      <h3>Library Shifts</h3>
      <ul id="shiftsList"></ul>
    </section>

    <!-- ================= Members Section ================= -->
    <section id="members" class="card section hidden">
      <h2>Tap on seat number to add new member</h2>
      <div id="seatContainer" class="seats-grid"></div>

      <!-- ================= Add Member Modal ================= -->
<!-- ================= Add Member Modal ================= -->
<div id="addMemberModal" class="modal hidden">
  <div class="modal-content">
    <h3>New Admission</h3>
    <form id="memberForm">

      <!-- Basic Details -->
      <h4>Personal Details</h4>
      <label>Full Name:</label>
      <input type="text" id="memberName" required />

      <label>Mobile No.:</label>
      <input type="tel" id="memberMobile" maxlength="10" pattern="[0-9]{10}" required />

      <label>Email ID:</label>
      <input type="email" id="memberEmail" placeholder="example@email.com" required />

      <label>Date of Birth:</label>
      <input type="date" id="memberDob" required />

      <label>Aadhaar No.:</label>
      <input type="text" id="memberAadhaar" maxlength="12" pattern="[0-9]{12}" required />

      <label>Address:</label>
      <textarea id="memberAddress" required></textarea>

      <!-- Library Shift -->
      <h4>Shift & Admission</h4>
      <label>Shift:</label>
      <select id="memberShift" required>
        <option value="">-- Select Shift --</option>
        <option value="Full Day">Full Day</option>
        <option value="Half Day">Half Day</option>
        <option value="Morning">Morning</option>
        <option value="Evening">Evening</option>
      </select>

      <label>Joining Date:</label>
      <input type="date" id="joiningDate" required />

      <label>Exit Date:</label>
      <input type="date" id="exitDate" />

      <!-- Fee & Payment -->
      <h4>Fee & Payment</h4>
      <label>Total Fee (â‚¹):</label>
      <input type="number" id="feeAmount" min="0" required />

      <label>Discount / Concession (â‚¹):</label>
      <input type="number" id="feeDiscount" min="0" value="0" />

      <label>Paid Amount (â‚¹):</label>
      <input type="number" id="paidAmount" min="0" required />

      <label>Balance (â‚¹):</label>
      <input type="number" id="balanceAmount" min="0" readonly />

      <label>Payment Method:</label>
      <select id="feeMethod" onchange="togglePaymentDetails()">
        <option value="Cash">Cash</option>
        <option value="UPI">UPI</option>
        <option value="Card">Card</option>
        <option value="Net Banking">Net Banking</option>
      </select>

      <!-- Extra Fields for Payment -->
      <div id="paymentDetails" class="hidden">
        <label id="transactionLabel">Transaction ID / Reference:</label>
        <input type="text" id="transactionId" />
      </div>

      <label>Payment Date:</label>
      <input type="date" id="paymentDate" required />

      <!-- Documents -->
      <h4>Documents</h4>
      <label>Aadhaar Photo:</label>
      <input type="file" id="aadhaarPhoto" accept="image/*" required />

      <label>Profile Picture:</label>
      <video id="profileCamera" width="200" height="150" autoplay></video>
      <button type="button" onclick="captureProfile()">Capture Photo</button>
      <canvas id="profileCanvas" width="200" height="150" class="hidden"></canvas>

      <div style="margin-top:15px;">
        <button type="button" onclick="saveMember()">Save Admission</button>
        <button type="button" onclick="closeAddMemberModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>
     <!-- ================= Member Details Modal (View first, then Edit) ================= -->
<div id="memberDetailsModal" class="modal hidden">
  <div class="modal-content">
    <h3>Member Details</h3>

    <!-- Readonly View -->
    <div id="memberDetailsView">
      <div class="view-grid">
        <div class="view-row"><span>Seat No:</span><strong id="viewSeatNo"></strong></div>
        <div class="view-row"><span>Full Name:</span><strong id="viewName"></strong></div>
        <div class="view-row"><span>Mobile:</span><strong id="viewMobile"></strong></div>
        <div class="view-row"><span>Email:</span><strong id="viewEmail"></strong></div>
        <div class="view-row"><span>Date of Birth:</span><strong id="viewDob"></strong></div>
        <div class="view-row"><span>Aadhaar:</span><strong id="viewAadhaar"></strong></div>
        <div class="view-row"><span>Address:</span><strong id="viewAddress"></strong></div>
        
        <div class="view-row"><span>Shift:</span><strong id="viewShift"></strong></div>
        <div class="view-row"><span>Joining:</span><strong id="viewJoining"></strong></div>
        <div class="view-row"><span>Exit:</span><strong id="viewExit"></strong></div>

        <div class="view-row"><span>Total Fee (â‚¹):</span><strong id="viewFee"></strong></div>
        <div class="view-row"><span>Discount (â‚¹):</span><strong id="viewDiscount"></strong></div>
        <div class="view-row"><span>Paid (â‚¹):</span><strong id="viewPaid"></strong></div>
        <div class="view-row"><span>Balance (â‚¹):</span><strong id="viewBalance"></strong></div>

        <div class="view-row"><span>Payment Method:</span><strong id="viewMethod"></strong></div>
        <div class="view-row"><span>Transaction ID:</span><strong id="viewTransaction"></strong></div>
        <div class="view-row"><span>Payment Date:</span><strong id="viewPaymentDate"></strong></div>

        <div class="view-row"><span>Status:</span><strong id="viewStatus"></strong></div>

        <div class="view-row">
          <span>Profile:</span>
          <img id="viewProfileImg" alt="Profile" />
        </div>
        <div class="view-row">
          <span>Aadhaar Photo:</span>
          <img id="viewAadhaarImg" alt="Aadhaar" />
        </div>
      </div>

      <!-- Buttons for View Mode -->
      <div class="view-actions">
        <button type="button" id="editToggleBtn" onclick="enableEditMode()">Edit</button>
        <button type="button" onclick="deleteMember()">Delete</button>
        <button type="button" onclick="changeSeat()">Change Seat</button>
        <button type="button" onclick="closeMemberModal()">Close</button>
      </div>
    </div>

    <!-- Edit Form (hidden initially) -->
    <form id="editMemberForm" class="hidden">

      <!-- Personal Details -->
      <label>Full Name:</label>
      <input type="text" id="editMemberName" required />

      <label>Mobile No.:</label>
      <input type="tel" id="editMemberMobile" maxlength="10" required />

      <label>Email ID:</label>
      <input type="email" id="editMemberEmail" />

      <label>Date of Birth:</label>
      <input type="date" id="editMemberDob" />

      <label>Aadhaar No.:</label>
      <input type="text" id="editMemberAadhaar" maxlength="12" required />

      <label>Address:</label>
      <textarea id="editMemberAddress" required></textarea>

      <!-- Shift & Admission -->
      <label>Shift:</label>
      <select id="editMemberShift">
        <option value="Full Day">Full Day</option>
        <option value="Half Day">Half Day</option>
        <option value="Morning">Morning</option>
        <option value="Evening">Evening</option>
      </select>

      <label>Joining Date:</label>
      <input type="date" id="editJoiningDate" required />

      <label>Exit Date:</label>
      <input type="date" id="editExitDate" />

      <!-- Fee & Payment -->
      <label>Total Fee (â‚¹):</label>
      <input type="number" id="editFeeAmount" min="0" required />

      <label>Discount / Concession (â‚¹):</label>
      <input type="number" id="editFeeDiscount" min="0" value="0" />

      <label>Paid Amount (â‚¹):</label>
      <input type="number" id="editPaidAmount" min="0" required />

      <label>Balance (â‚¹):</label>
      <input type="number" id="editBalanceAmount" min="0" readonly />

      <label>Payment Method:</label>
      <select id="editFeeMethod" onchange="toggleEditPaymentDetails()">
        <option value="Cash">Cash</option>
        <option value="UPI">UPI</option>
        <option value="Card">Card</option>
        <option value="Net Banking">Net Banking</option>
      </select>

      <div id="editPaymentDetails" class="hidden">
        <label>Transaction ID / Reference:</label>
        <input type="text" id="editTransactionId" />
      </div>

      <label>Payment Date:</label>
      <input type="date" id="editPaymentDate" required />

      <!-- Buttons for Edit Mode -->
      <div class="view-actions">
        <button type="button" onclick="updateMember()">Update</button>
        <button type="button" onclick="cancelEdit()">Cancel</button>
      </div>
    </form>
  </div>
</div>


    <!-- ================= Fee Section ================= -->
    <section id="feeDetails" class="card section hidden">
      <h2>Fee Details</h2>
      <div class="fee-buttons">
        <button onclick="showFeeClassification('status')">Fee Status</button>
        <button onclick="showFeeClassification('tomorrow')">Ending Tomorrow</button>
        <button onclick="showFeeClassification('5days')">Ending in 5 Days</button>
        <button onclick="showFeeClassification('remainder')">Fee Reminder</button>
      </div>
      <div id="feeDisplayContainer"></div>
      <div style="margin-top:20px;">
        <button onclick="sendReminder('all')" id="sendAllReminderBtn">Send Reminder to All</button>
      </div>
    </section>
  </main>

  <script src="dashboard.js"></script>
</body>
</html>
