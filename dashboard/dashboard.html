<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dashboard - Data Record</title>
  <link rel="stylesheet" href="dashboard.css">
</head>
<body>
  <header class="site-header">
    <div class="container">
      <h1>ðŸ“š DATA RECORD</h1>
      <p class="tagline">Easy & Smart Management</p>
    </div>
    <div class="header-right">
      <span id="orgNameDisplay"></span>
      <span id="clock"></span>
      <button id="logoutBtn">Logout</button>
    </div>
  </header>

  <nav class="sidebar">
    <button onclick="showSection('orgDetails')">Organisation Details</button>
    <button onclick="showSection('Notifications')">Add Notifications /Information</button>
    <button onclick="showSection('members')">Members</button>
    <button onclick="showSection('feeDetails')">Fee Details</button>
    <button onclick="showSection('reports')">Reports</button>
  </nav>

  <main>
    <!-- Organisation Section -->
    <section id="orgDetails" class="card section hidden">
      <h2>Organisation Details</h2>
      <p><strong>Organisation Name:</strong> <span id="orgName"></span></p>
      <p><strong>Admin Name:</strong> <span id="adminName"></span></p>
      <p><strong>Address:</strong> <span id="address"></span></p>
      <p><strong>Mobile:</strong> <span id="mobile"></span></p>
      <p><strong>Email:</strong> <span id="email"></span></p>
      <p><strong>Subscription:</strong> <span id="subscription"></span></p>
      <h3>Library Shifts</h3>
      <ul id="shiftsList"></ul>
    </section>

    <!-- ================= Members Section ================= -->
    <section id="members" class="card section hidden">
      <h2>Tap on seat number to add new member</h2>
      <div id="seatContainer" class="seats-grid"></div>

      <!-- ================= Add Member Modal ================= -->
      <div id="addMemberModal" class="modal hidden">
        <div class="modal-content">
          <h3>Add Member</h3>
          <form id="memberForm">
            <label>Member Name:</label>
            <input type="text" id="memberName" required />

            <label>Mobile No.:</label>
            <input type="tel" id="memberMobile" required />

            <label>Aadhaar No.:</label>
            <input type="text" id="memberAadhaar" required />

            <label>Address:</label>
            <textarea id="memberAddress" required></textarea>

            <label>Shift:</label>
            <select id="memberShift">
              <option value="Full Day">Full Day</option>
              <option value="Half Day">Half Day</option>
            </select>

            <label>Joining Date:</label>
            <input type="date" id="joiningDate" required />

            <label>Exit Date:</label>
            <input type="date" id="exitDate" />

            <label>Total Fee (â‚¹):</label>
            <input type="number" id="feeAmount" min="0" required />

            <label>Fee Payment Method:</label>
            <select id="feeMethod">
              <option value="Cash">Cash</option>
              <option value="UPI">UPI</option>
              <option value="Card">Card</option>
            </select>

            <label>Aadhaar Photo:</label>
            <input type="file" id="aadhaarPhoto" accept="image/*" />

            <label>Profile Picture:</label>
            <video id="profileCamera" width="200" height="150" autoplay></video>
            <button type="button" onclick="captureProfile()">Capture Photo</button>
            <canvas id="profileCanvas" width="200" height="150" class="hidden"></canvas>

            <div style="margin-top:10px;">
              <button type="button" onclick="saveMember()">Save</button>
              <button type="button" onclick="closeAddMemberModal()">Cancel</button>
            </div>
          </form>
        </div>
      </div>

      <!-- ================= Member Details Modal (View first, then Edit) ================= -->
      <div id="memberDetailsModal" class="modal hidden">
        <div class="modal-content">
          <h3>Member Details</h3>

          <!-- Readonly View -->
          <div id="memberDetailsView">
            <div class="view-grid">
              <div class="view-row"><span>Seat No:</span><strong id="viewSeatNo"></strong></div>
              <div class="view-row"><span>Name:</span><strong id="viewName"></strong></div>
              <div class="view-row"><span>Mobile:</span><strong id="viewMobile"></strong></div>
              <div class="view-row"><span>Aadhaar:</span><strong id="viewAadhaar"></strong></div>
              <div class="view-row"><span>Address:</span><strong id="viewAddress"></strong></div>
              <div class="view-row"><span>Shift:</span><strong id="viewShift"></strong></div>
              <div class="view-row"><span>Joining:</span><strong id="viewJoining"></strong></div>
              <div class="view-row"><span>Exit:</span><strong id="viewExit"></strong></div>
              <div class="view-row"><span>Fee (â‚¹):</span><strong id="viewFee"></strong></div>
              <div class="view-row"><span>Method:</span><strong id="viewMethod"></strong></div>
              <div class="view-row"><span>Status:</span><strong id="viewStatus"></strong></div>
              <div class="view-row">
                <span>Profile:</span>
                <img id="viewProfileImg" alt="Profile" />
              </div>
              <div class="view-row">
                <span>Aadhaar Photo:</span>
                <img id="viewAadhaarImg" alt="Aadhaar" />
              </div>
            </div>

            <div class="view-actions">
              <button type="button" id="editToggleBtn" onclick="enableEditMode()">Edit</button>
              <button type="button" onclick="closeMemberModal()">Close</button>
            </div>
          </div>

          <!-- Edit Form (hidden initially) -->
          <form id="editMemberForm" class="hidden">
            <label>Member Name:</label>
            <input type="text" id="editMemberName" required />

            <label>Mobile No.:</label>
            <input type="tel" id="editMemberMobile" required />

            <label>Aadhaar No.:</label>
            <input type="text" id="editMemberAadhaar" required />

            <label>Address:</label>
            <textarea id="editMemberAddress" required></textarea>

            <label>Shift:</label>
            <select id="editMemberShift">
              <option value="Full Day">Full Day</option>
              <option value="Half Day">Half Day</option>
            </select>

            <label>Joining Date:</label>
            <input type="date" id="editJoiningDate" required />

            <label>Exit Date:</label>
            <input type="date" id="editExitDate" />

            <label>Total Fee (â‚¹):</label>
            <input type="number" id="editFeeAmount" min="0" required />

            <label>Fee Payment Method:</label>
            <select id="editFeeMethod">
              <option value="Cash">Cash</option>
              <option value="UPI">UPI</option>
              <option value="Card">Card</option>
            </select>

            <div class="view-actions">
              <button type="button" onclick="updateMember()">Update</button>
              <button type="button" onclick="cancelEdit()">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </section>

    <!-- ================= Fee Section ================= -->
    <section id="feeDetails" class="card section hidden">
      <h2>Fee Details</h2>
      <div class="fee-buttons">
        <button onclick="showFeeClassification('status')">Fee Status</button>
        <button onclick="showFeeClassification('tomorrow')">Ending Tomorrow</button>
        <button onclick="showFeeClassification('5days')">Ending in 5 Days</button>
        <button onclick="showFeeClassification('remainder')">Fee Reminder</button>
      </div>
      <div id="feeDisplayContainer"></div>
      <div style="margin-top:20px;">
        <button onclick="sendReminder('all')" id="sendAllReminderBtn">Send Reminder to All</button>
      </div>
    </section>
  </main>

  <script src="dashboard.js"></script>
</body>
</html>
